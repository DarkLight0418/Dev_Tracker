# Problem: 새로고침 시 로그인 상태가 풀리는 현상

## 1. 문제 발생 배경
- 로그인/로그아웃 API 리팩토링 이후 테스트 중 발생
- 정상 기대: 새로고침 후에도 로그인 유지

## 2. 실제로 발생한 현상
- 새로고침 시 로그인 상태 해제
- 콘솔 에러 없음
- 서버 로그 상 세션 만료 로그 없음
- 재현 가능 (항상)

## 3. 1차 가설
- 세션 저장 방식 변경 중 누락 가능성
- 쿠키 옵션 설정 문제 의심

## 4. 확인 및 시도
- 세션 저장 코드 재확인 → 이상 없음
- 쿠키 옵션 점검 → SameSite 기본값 사용 중
- 개발 환경에서 HTTPS 미적용 상태 확인

## 5. 근본 원인
- SameSite=None 쿠키가 HTTPS 환경이 아니면 브라우저에서 차단됨
- 로컬 환경에서 Secure 옵션 미충족

## 6. 해결 방법
- 로컬 환경에서는 SameSite=Lax 사용
- 운영 환경에서만 Secure + None 적용

## 7. 검증
- 새로고침 후 로그인 유지 확인
- 다른 API 영향 없음

## 8. 회고
- 쿠키 정책에 대한 이해 부족
- 환경별 보안 옵션 분기 필요성 인지
